{"ast":null,"code":"import _defineProperty2 from \"@babel/runtime/helpers/defineProperty\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty2(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport * as React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { SafeAreaInsetsContext } from 'react-native-safe-area-context';\nimport ENV, { ACTION, ALERT_TYPE } from \"../config/ENV\";\nimport { getImage } from \"../service\";\nimport Color from \"../service/color\";\n\nvar Toast = function (_React$Component) {\n  _inherits(Toast, _React$Component);\n\n  var _super = _createSuper(Toast);\n\n  function Toast(props, context) {\n    var _this;\n\n    _classCallCheck(this, Toast);\n\n    _this = _super.call(this, props, context);\n\n    _defineProperty(_assertThisInitialized(_this), \"context\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_positionToast\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_cardHeight\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_timeout\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidUpdate\", function (prevProps) {\n      if (prevProps.isDark !== _this.props.isDark) {\n        _this.setState(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            styles: __styles(_this.props.isDark)\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_open\", function _callee(args) {\n      var _this$state$config, _this$state$config2, _this$props$config, _this$state$config3, _this$state$config3$o, autoClose, duration;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!_this.state.visible) {\n                _context.next = 4;\n                break;\n              }\n\n              if (_this._timeout) {\n                clearTimeout(_this._timeout);\n              }\n\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(_this._startAnimation(ACTION.CLOSE));\n\n            case 4:\n              _this._positionToast = new Animated.Value(-500);\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(new Promise(function (resolve) {\n                return _this.setState(function (prevState) {\n                  return _objectSpread(_objectSpread({}, prevState), {}, {\n                    visible: true,\n                    config: args\n                  });\n                }, resolve);\n              }));\n\n            case 7:\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(_this._startAnimation(ACTION.OPEN));\n\n            case 9:\n              autoClose = ((_this$state$config = _this.state.config) === null || _this$state$config === void 0 ? void 0 : _this$state$config.autoClose) !== undefined ? (_this$state$config2 = _this.state.config) === null || _this$state$config2 === void 0 ? void 0 : _this$state$config2.autoClose : (_this$props$config = _this.props.config) === null || _this$props$config === void 0 ? void 0 : _this$props$config.autoClose;\n\n              if (autoClose || autoClose === undefined) {\n                duration = typeof autoClose === 'number' ? autoClose : ENV.AUTO_CLOSE;\n                _this._timeout = setTimeout(function () {\n                  return _this._close();\n                }, duration);\n              }\n\n              (_this$state$config3 = _this.state.config) === null || _this$state$config3 === void 0 ? void 0 : (_this$state$config3$o = _this$state$config3.onShow) === null || _this$state$config3$o === void 0 ? void 0 : _this$state$config3$o.call(_this$state$config3);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_close\", function _callee2() {\n      var _this$state$config4, onHide;\n\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(_this._startAnimation(ACTION.CLOSE));\n\n            case 2:\n              onHide = (_this$state$config4 = _this.state.config) === null || _this$state$config4 === void 0 ? void 0 : _this$state$config4.onShow;\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(new Promise(function (resolve) {\n                return _this.setState(function (prevState) {\n                  return _objectSpread(_objectSpread({}, prevState), {}, {\n                    visible: false,\n                    config: undefined\n                  });\n                }, resolve);\n              }));\n\n            case 5:\n              onHide === null || onHide === void 0 ? void 0 : onHide();\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_startAnimation\", function (action) {\n      return new Promise(function (resolve) {\n        var _this$context$top, _this$context;\n\n        Animated.timing(_this._positionToast, {\n          toValue: action === ACTION.OPEN ? (_this$context$top = (_this$context = _this.context) === null || _this$context === void 0 ? void 0 : _this$context.top) !== null && _this$context$top !== void 0 ? _this$context$top : 0 : -_this._cardHeight,\n          duration: 250,\n          useNativeDriver: true\n        }).start(function () {\n          return resolve();\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_CardRender\", function () {\n      var styles = _this.state.styles;\n\n      if (_this.state.config) {\n        var _this$state$config5 = _this.state.config,\n            type = _this$state$config5.type,\n            title = _this$state$config5.title,\n            textBody = _this$state$config5.textBody,\n            onPress = _this$state$config5.onPress,\n            onLongPress = _this$state$config5.onLongPress;\n        return React.createElement(Animated.View, {\n          onLayout: function onLayout(_ref) {\n            var height = _ref.nativeEvent.layout.height;\n            return _this._cardHeight = height;\n          },\n          style: StyleSheet.flatten([styles.cardRow, {\n            transform: [{\n              translateY: _this._positionToast\n            }]\n          }])\n        }, React.createElement(Pressable, {\n          style: styles.cardContainer,\n          onPress: onPress,\n          onLongPress: onLongPress\n        }, type && React.createElement(React.Fragment, null, React.createElement(View, {\n          style: styles.backendImage\n        }), React.createElement(Image, {\n          source: getImage(type),\n          resizeMode: \"contain\",\n          style: StyleSheet.flatten([styles.image, styles[type + \"Image\"]])\n        })), React.createElement(View, {\n          style: {\n            overflow: 'hidden',\n            flex: 1\n          }\n        }, title && React.createElement(Text, {\n          style: styles.titleLabel\n        }, title), textBody && React.createElement(Text, {\n          style: styles.descLabel\n        }, textBody))));\n      }\n\n      return React.createElement(React.Fragment, null);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      var visible = _this.state.visible;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          _CardRender = _assertThisInitialize._CardRender;\n\n      if (!visible) {\n        return React.createElement(React.Fragment, null);\n      }\n\n      return React.createElement(_CardRender, null);\n    });\n\n    _this._cardHeight = 0;\n    _this._positionToast = new Animated.Value(-500);\n    _this.state = {\n      styles: __styles(props.isDark),\n      visible: false,\n      cardHeight: 0\n    };\n    return _this;\n  }\n\n  return _createClass(Toast);\n}(React.Component);\n\n_defineProperty(Toast, \"contextType\", SafeAreaInsetsContext);\n\n_defineProperty(Toast, \"instance\", React.createRef());\n\n_defineProperty(Toast, \"show\", function (args) {\n  var _Toast$instance$curre;\n\n  (_Toast$instance$curre = Toast.instance.current) === null || _Toast$instance$curre === void 0 ? void 0 : _Toast$instance$curre._open(args);\n});\n\n_defineProperty(Toast, \"hide\", function () {\n  var _Toast$instance$curre2;\n\n  (_Toast$instance$curre2 = Toast.instance.current) === null || _Toast$instance$curre2 === void 0 ? void 0 : _Toast$instance$curre2._close();\n});\n\nvar __styles = function __styles(isDark) {\n  var _StyleSheet$create;\n\n  return StyleSheet.create((_StyleSheet$create = {\n    backgroundContainer: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n      backgroundColor: '#00000070'\n    }),\n    container: {\n      position: 'absolute',\n      backgroundColor: '#00000030',\n      top: 0,\n      left: 0,\n      right: 0\n    },\n    cardRow: {\n      zIndex: 9999,\n      position: 'absolute',\n      left: 0,\n      right: 0\n    },\n    cardContainer: {\n      flexDirection: 'row',\n      borderRadius: 12,\n      paddingHorizontal: 12,\n      paddingTop: 12,\n      paddingBottom: 12,\n      marginHorizontal: 12,\n      marginBottom: 12,\n      backgroundColor: Color.get('card', isDark)\n    },\n    titleLabel: {\n      fontWeight: 'bold',\n      fontSize: 18,\n      color: Color.get('label', isDark)\n    },\n    descLabel: {\n      color: Color.get('label', isDark)\n    },\n    backendImage: {\n      position: 'absolute',\n      alignSelf: 'center',\n      height: 12,\n      width: 12,\n      backgroundColor: '#FBFBFB',\n      borderRadius: 100,\n      left: 12 + 7\n    },\n    image: {\n      alignSelf: 'center',\n      width: 25,\n      aspectRatio: 1,\n      marginRight: 12\n    }\n  }, _defineProperty2(_StyleSheet$create, ALERT_TYPE.SUCCESS + \"Image\", {\n    tintColor: Color.get('success', isDark)\n  }), _defineProperty2(_StyleSheet$create, ALERT_TYPE.DANGER + \"Image\", {\n    tintColor: Color.get('danger', isDark)\n  }), _defineProperty2(_StyleSheet$create, ALERT_TYPE.WARNING + \"Image\", {\n    tintColor: Color.get('warning', isDark)\n  }), _StyleSheet$create));\n};\n\nexport default Toast;","map":{"version":3,"sources":["Toast.tsx"],"names":["Toast","React","SafeAreaInsetsContext","args","constructor","Animated","styles","__styles","props","visible","cardHeight","prevProps","prevState","clearTimeout","ACTION","resolve","config","autoClose","duration","ENV","setTimeout","onHide","undefined","action","toValue","useNativeDriver","onLongPress","nativeEvent","layout","height","transform","translateY","_positionToast","type","backendImage","getImage","StyleSheet","overflow","flex","title","titleLabel","textBody","descLabel","_CardRender","isDark","backgroundContainer","backgroundColor","container","position","top","left","right","cardRow","zIndex","cardContainer","flexDirection","borderRadius","paddingHorizontal","paddingTop","paddingBottom","marginHorizontal","marginBottom","Color","fontWeight","fontSize","color","alignSelf","width","image","aspectRatio","marginRight","ALERT_TYPE","tintColor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAP,KAAA,MAAA,OAAA;;;;;;;AAEA,SAAA,qBAAA,QAAA,gCAAA;AACA,OAAA,GAAA,IAAA,MAAA,EAAA,UAAA;AACA,SAAA,QAAA;AACA,OAAA,KAAA;;IA0BA,K;;;;;AAoDEI,iBAAW,KAAXA,EAAW,OAAXA,EAAqF;AAAA;;AAAA;;AACnF,8BAAA,KAAA,EAAA,OAAA;;AADmF,IAAA,eAAA,gCAAA,SAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,gCAAA,gBAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,gCAAA,aAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,gCAAA,UAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,gCAAA,oBAAA,EAcxDO,UAAAA,SAAD,EAAuC;AACjE,UAAIA,SAAS,CAATA,MAAAA,KAAqB,MAAA,KAAA,CAAzB,MAAA,EAA4C;AAE1C,cAAA,QAAA,CAAeC,UAAAA,SAAD;AAAA,iDAAgB,SAAhB;AAEZN,YAAAA,MAAM,EAAEC,QAAQ,CAAC,MAAA,KAAA,CAAD,MAAA;AAFJ;AAAA,SAAd;AAID;AArBkF,KAAA,CAAA;;AAAA,IAAA,eAAA,gCAAA,OAAA,EA4BrE,iBAAA,IAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,mBACV,MAAA,KAAA,CAAJ,OADc;AAAA;AAAA;AAAA;;AAEZ,kBAAI,MAAJ,QAAA,EAAmB;AACjBM,gBAAAA,YAAY,CAAC,MAAbA,QAAY,CAAZA;AACD;;AAJW;AAAA,+CAKN,MAAA,eAAA,CAAqBC,MAAM,CAAjC,KAAM,CALM;;AAAA;AAOd,oBAAA,cAAA,GAAsB,IAAIT,QAAQ,CAAZ,KAAA,CAAmB,CAAzC,GAAsB,CAAtB;AAPc;AAAA,+CAQR,IAAA,OAAA,CAAmBU,UAAAA,OAAD;AAAA,uBAAa,MAAA,QAAA,CAAeH,UAAAA,SAAD;AAAA,yDAAgB,SAAhB;AAAgCH,oBAAAA,OAAO,EAAvB,IAAhB;AAA+CO,oBAAAA,MAAM,EAAEb;AAAvD;AAAA,iBAAd,EAArC,OAAqC,CAAb;AAAA,eAAlB,CARQ;;AAAA;AAAA;AAAA,+CASR,MAAA,eAAA,CAAqBW,MAAM,CAAjC,IAAM,CATQ;;AAAA;AAWRG,cAAAA,SAXQ,GAWI,CAAA,CAAA,kBAAA,GAAA,MAAA,KAAA,CAAA,MAAA,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,kBAAA,CAAA,SAAA,MAAA,SAAA,GAAA,CAAA,mBAAA,GAA6C,MAAA,KAAA,CAA7C,MAAA,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAA6C,mBAAA,CAA7C,SAAA,GAAA,CAAA,kBAAA,GAA4E,MAAA,KAAA,CAA5E,MAAA,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAA4E,kBAAA,CAA9F,SAXc;;AAYd,kBAAIA,SAAS,IAAIA,SAAS,KAA1B,SAAA,EAA0C;AAClCC,gBAAAA,QADkC,GACvB,OAAA,SAAA,KAAA,QAAA,GAAA,SAAA,GAA4CC,GAAG,CAAhE,UADwC;AAExC,sBAAA,QAAA,GAAgBC,UAAU,CAAC;AAAA,yBAAM,MAAP,MAAO,EAAN;AAAA,iBAAD,EAA1B,QAA0B,CAA1B;AACD;;AACD,eAAA,mBAAA,GAAA,MAAA,KAAA,CAAA,MAAA,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,qBAAA,GAAA,mBAAA,CAAA,MAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAAA,IAAA,CAAA,mBAAA,CAAA;;AAhBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA5BqE,CAAA;;AAAA,IAAA,eAAA,gCAAA,QAAA,EAkDpE;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACT,MAAA,eAAA,CAAqBN,MAAM,CAAjC,KAAM,CADS;;AAAA;AAETO,cAAAA,MAFS,GAEH,CAAA,mBAAA,GAAG,MAAA,KAAA,CAAH,MAAA,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAG,mBAAA,CAAf,MAFe;AAAA;AAAA,+CAGT,IAAA,OAAA,CAAmBN,UAAAA,OAAD;AAAA,uBAAa,MAAA,QAAA,CAAeH,UAAAA,SAAD;AAAA,yDAAgB,SAAhB;AAAgCH,oBAAAA,OAAO,EAAvB,KAAhB;AAAgDO,oBAAAA,MAAM,EAAEM;AAAxD;AAAA,iBAAd,EAArC,OAAqC,CAAb;AAAA,eAAlB,CAHS;;AAAA;AAIfD,cAAAA,MAAM,KAANA,IAAAA,IAAAA,MAAM,KAAA,KAANA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,MAAM,EAANA;;AAJe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAlDoE,CAAA;;AAAA,IAAA,eAAA,gCAAA,iBAAA,EA6D1DE,UAAAA,MAAD,EAAmC;AAC3D,aAAO,IAAA,OAAA,CAAaR,UAAAA,OAAD,EAAa;AAAA,YAAA,iBAAA,EAAA,aAAA;;AAC9BV,QAAAA,QAAQ,CAARA,MAAAA,CAAgB,MAAhBA,cAAAA,EAAqC;AACnCmB,UAAAA,OAAO,EAAED,MAAM,KAAKT,MAAM,CAAjBS,IAAAA,GAAAA,CAAAA,iBAAAA,GAAAA,CAAAA,aAAAA,GAAyB,MAAzBA,OAAAA,MAAAA,IAAAA,IAAAA,aAAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAyB,aAAA,CAAzBA,GAAAA,MAAAA,IAAAA,IAAAA,iBAAAA,KAAAA,KAAAA,CAAAA,GAAAA,iBAAAA,GAAAA,CAAAA,GAAkD,CAAC,MADzB,WAAA;AAEnCL,UAAAA,QAAQ,EAF2B,GAAA;AAGnCO,UAAAA,eAAe,EAAE;AAHkB,SAArCpB,EAAAA,KAAAA,CAIS;AAAA,iBAAMU,OAJfV,EAIS;AAAA,SAJTA;AADF,OAAO,CAAP;AA9DmF,KAAA,CAAA;;AAAA,IAAA,eAAA,gCAAA,aAAA,EA0E/D,YAAmB;AACvC,UAAQC,MAAR,GAAmB,MAAnB,KAAA,CAAQA,MAAR;;AACA,UAAI,MAAA,KAAA,CAAJ,MAAA,EAAuB;AACrB,kCAAwD,MAAA,KAAA,CAAxD,MAAA;AAAA,YAAM,IAAN,uBAAM,IAAN;AAAA,YAAM,KAAN,uBAAM,KAAN;AAAA,YAAM,QAAN,uBAAM,QAAN;AAAA,YAAM,OAAN,uBAAM,OAAN;AAAA,YAAwCoB,WAAxC,uBAAwCA,WAAxC;AACA,eACE,KAAA,CAAA,aAAA,CAAC,QAAD,CAAA,IAAA,EAAA;AACE,UAAA,QAAQ,EAAE;AAAA,gBAEIG,MAFJ,QACRF,WADQ,CAENC,MAFM,CAEIC,MAFJ;AAAA,mBAIH,MAAA,WAAA,GALT,MACY;AAAA,WADZ;AAME,UAAA,KAAK,EAAE,UAAU,CAAV,OAAA,CAAmB,CAACvB,MAAM,CAAP,OAAA,EAAiB;AAAEwB,YAAAA,SAAS,EAAE,CAAC;AAAEC,cAAAA,UAAU,EAAE,MAAKC;AAAnB,aAAD;AAAb,WAAjB,CAAnB;AANT,SAAA,EAQE,KAAA,CAAA,aAAA,CAAA,SAAA,EAAA;AAAW,UAAA,KAAK,EAAE1B,MAAM,CAAxB,aAAA;AAAwC,UAAA,OAAO,EAA/C,OAAA;AAA0D,UAAA,WAAW,EAAEoB;AAAvE,SAAA,EACGO,IAAI,IACH,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAM,UAAA,KAAK,EAAE3B,MAAM,CAAC4B;AAApB,SAAA,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAO,UAAA,MAAM,EAAEC,QAAQ,CAAvB,IAAuB,CAAvB;AAA+B,UAAA,UAAU,EAAzC,SAAA;AAAoD,UAAA,KAAK,EAAEC,UAAU,CAAVA,OAAAA,CAAmB,CAAC9B,MAAM,CAAP,KAAA,EAAeA,MAAM,CAAxC8B,IAAwC,WAArB,CAAnBA;AAA3D,SAAA,CAFF,CAFJ,EAQE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAM,UAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAV,QAAA;AAAsBC,YAAAA,IAAI,EAAE;AAA5B;AAAb,SAAA,EACGC,KAAK,IAAI,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAM,UAAA,KAAK,EAAEjC,MAAM,CAACkC;AAApB,SAAA,EADZ,KACY,CADZ,EAEGC,QAAQ,IAAI,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAM,UAAA,KAAK,EAAEnC,MAAM,CAACoC;AAApB,SAAA,EAnBrB,QAmBqB,CAFf,CARF,CARF,CADF;AAwBD;;AACD,aAAO,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAP,IAAO,CAAP;AAvGmF,KAAA,CAAA;;AAAA,IAAA,eAAA,gCAAA,QAAA,EA6GrE,YAAmB;AACjC,UAAQjC,OAAR,GAAoB,MAApB,KAAA,CAAQA,OAAR;;AACA;AAAA,UAAQkC,WAAR,yBAAQA,WAAR;;AACA,UAAI,CAAJ,OAAA,EAAc;AACZ,eAAO,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAP,IAAO,CAAP;AACD;;AACD,aAAO,KAAA,CAAA,aAAA,CAAA,WAAA,EAAP,IAAO,CAAP;AAnHmF,KAAA,CAAA;;AAEnF,UAAA,WAAA,GAAA,CAAA;AACA,UAAA,cAAA,GAAsB,IAAItC,QAAQ,CAAZ,KAAA,CAAmB,CAAzC,GAAsB,CAAtB;AACA,UAAA,KAAA,GAAa;AACXC,MAAAA,MAAM,EAAEC,QAAQ,CAACC,KAAK,CADX,MACK,CADL;AAEXC,MAAAA,OAAO,EAFI,KAAA;AAGXC,MAAAA,UAAU,EAAE;AAHD,KAAb;AAJmF;AASpF;;;EA7DiBT,KAAK,CAAzB,S;;gBAAMD,K,iBAIiBE,qB;;gBAJjBF,K,cAS6CC,KAAK,CAALA,SAAAA,E;;gBAT7CD,K,UAckBG,UAAAA,IAAD,EAAyB;AAAA,MAAA,qBAAA;;AAC5C,GAAA,qBAAA,GAAA,KAAK,CAAL,QAAA,CAAA,OAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAAA,KAAA,CAAA,IAAA,CAAA;;;gBAfEH,K,UAqBiB,YAAY;AAAA,MAAA,sBAAA;;AAC/B,GAAA,sBAAA,GAAA,KAAK,CAAL,QAAA,CAAA,OAAA,MAAA,IAAA,IAAA,sBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,sBAAA,CAAA,MAAA,EAAA;;;AAqJJ,IAAMO,QAAQ,GAAIqC,SAAZrC,QAAYqC,CAAAA,MAAD;AAAA;;AAAA,SACf,UAAU,CAAV,MAAA;AACEC,IAAAA,mBAAmB,kCACdT,UAAU,CADM,kBAAF;AAEjBU,MAAAA,eAAe,EAAE;AAFA,MADrB;AAMEC,IAAAA,SAAS,EAAE;AACTC,MAAAA,QAAQ,EADC,UAAA;AAETF,MAAAA,eAAe,EAFN,WAAA;AAGTG,MAAAA,GAAG,EAHM,CAAA;AAITC,MAAAA,IAAI,EAJK,CAAA;AAKTC,MAAAA,KAAK,EAAE;AALE,KANb;AAcEC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EADC,IAAA;AAEPL,MAAAA,QAAQ,EAFD,UAAA;AAGPE,MAAAA,IAAI,EAHG,CAAA;AAIPC,MAAAA,KAAK,EAAE;AAJA,KAdX;AAqBEG,IAAAA,aAAa,EAAE;AACbC,MAAAA,aAAa,EADA,KAAA;AAEbC,MAAAA,YAAY,EAFC,EAAA;AAGbC,MAAAA,iBAAiB,EAHJ,EAAA;AAIbC,MAAAA,UAAU,EAJG,EAAA;AAKbC,MAAAA,aAAa,EALA,EAAA;AAMbC,MAAAA,gBAAgB,EANH,EAAA;AAObC,MAAAA,YAAY,EAPC,EAAA;AAQbf,MAAAA,eAAe,EAAEgB,KAAK,CAALA,GAAAA,CAAAA,MAAAA,EAAAA,MAAAA;AARJ,KArBjB;AAgCEtB,IAAAA,UAAU,EAAE;AACVuB,MAAAA,UAAU,EADA,MAAA;AAEVC,MAAAA,QAAQ,EAFE,EAAA;AAGVC,MAAAA,KAAK,EAAEH,KAAK,CAALA,GAAAA,CAAAA,OAAAA,EAAAA,MAAAA;AAHG,KAhCd;AAqCEpB,IAAAA,SAAS,EAAE;AACTuB,MAAAA,KAAK,EAAEH,KAAK,CAALA,GAAAA,CAAAA,OAAAA,EAAAA,MAAAA;AADE,KArCb;AAwCE5B,IAAAA,YAAY,EAAE;AACZc,MAAAA,QAAQ,EADI,UAAA;AAEZkB,MAAAA,SAAS,EAFG,QAAA;AAGZrC,MAAAA,MAAM,EAHM,EAAA;AAIZsC,MAAAA,KAAK,EAJO,EAAA;AAKZrB,MAAAA,eAAe,EALH,SAAA;AAMZU,MAAAA,YAAY,EANA,GAAA;AAOZN,MAAAA,IAAI,EAAE,KAAK;AAPC,KAxChB;AAiDEkB,IAAAA,KAAK,EAAE;AACLF,MAAAA,SAAS,EADJ,QAAA;AAELC,MAAAA,KAAK,EAFA,EAAA;AAGLE,MAAAA,WAAW,EAHN,CAAA;AAILC,MAAAA,WAAW,EAAE;AAJR;AAjDT,0CAwDMC,UAAU,CAAd,OAxDF,YAwDkC;AAC9BC,IAAAA,SAAS,EAAEV,KAAK,CAALA,GAAAA,CAAAA,SAAAA,EAAAA,MAAAA;AADmB,GAxDlC,wCA2DMS,UAAU,CAAd,MA3DF,YA2DiC;AAC7BC,IAAAA,SAAS,EAAEV,KAAK,CAALA,GAAAA,CAAAA,QAAAA,EAAAA,MAAAA;AADkB,GA3DjC,wCA8DMS,UAAU,CAAd,OA9DF,YA8DkC;AAC9BC,IAAAA,SAAS,EAAEV,KAAK,CAALA,GAAAA,CAAAA,SAAAA,EAAAA,MAAAA;AADmB,GA9DlC,uBADe;AAAA,CAAjB;;AAoEA,eAAA,KAAA","sourcesContent":["import * as React from 'react';\nimport { Animated, Image, Pressable, StyleSheet, Text, View } from 'react-native';\nimport { SafeAreaInsetsContext } from 'react-native-safe-area-context';\nimport ENV, { ACTION, ALERT_TYPE } from '../config/ENV';\nimport { getImage } from '../service';\nimport Color from '../service/color';\n\nexport type IConfig = {\n  type?: ALERT_TYPE;\n  // position?: TOAST_POSITION;\n  title?: string;\n  textBody?: string;\n  autoClose?: number | boolean;\n  onPress?: () => void;\n  onLongPress?: () => void;\n  onShow?: () => void;\n  onHide?: () => void;\n};\n\ntype IProps = {\n  isDark: boolean;\n  config?: Pick<IConfig, 'autoClose'>;\n};\n\ntype IState = {\n  styles: ReturnType<typeof __styles>;\n  cardHeight: number;\n  overlayClose?: boolean;\n  visible: boolean;\n  config?: IConfig;\n};\nclass Toast extends React.Component<IProps, IState> {\n  /**\n   * @type {React.Context<EdgeInsets | null>}\n   */\n  static contextType = SafeAreaInsetsContext;\n\n  /**\n   * @type {React.RefObject<Toast>}\n   */\n  public static instance: React.RefObject<Toast> = React.createRef();\n\n  /**\n   * @param {IConfig} args\n   */\n  public static show = (args: IConfig): void => {\n    Toast.instance.current?._open(args);\n  };\n\n  /**\n   *\n   */\n  public static hide = (): void => {\n    Toast.instance.current?._close();\n  };\n\n  /**\n   * @type {React.ContextType<typeof SafeAreaInsetsContext>}\n   */\n  public context!: React.ContextType<typeof SafeAreaInsetsContext>;\n\n  /**\n   * @type {Animated.Value}\n   * @private\n   */\n  private _positionToast: Animated.Value;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  private _cardHeight: number;\n\n  /**\n   * @type {NodeJS.Timeout}\n   * @private\n   */\n  private _timeout?: NodeJS.Timeout;\n\n  /**\n   * @param {IProps} props\n   * @param {React.ContextType<typeof SafeAreaInsetsContext>} context\n   */\n  constructor(props: IProps, context: React.ContextType<typeof SafeAreaInsetsContext>) {\n    super(props, context);\n    this._cardHeight = 0;\n    this._positionToast = new Animated.Value(-500);\n    this.state = {\n      styles: __styles(props.isDark),\n      visible: false,\n      cardHeight: 0,\n    };\n  }\n\n  /**\n   * @param {Readonly<IProps>} prevProps\n   */\n  public componentDidUpdate = (prevProps: Readonly<IProps>): void => {\n    if (prevProps.isDark !== this.props.isDark) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState((prevState) => ({\n        ...prevState,\n        styles: __styles(this.props.isDark),\n      }));\n    }\n  };\n\n  /**\n   * @param {IConfig} args\n   * @return {Promise<void>}\n   */\n  private _open = async (args: IConfig): Promise<void> => {\n    if (this.state.visible) {\n      if (this._timeout) {\n        clearTimeout(this._timeout);\n      }\n      await this._startAnimation(ACTION.CLOSE);\n    }\n    this._positionToast = new Animated.Value(-500);\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, visible: true, config: args }), resolve));\n    await this._startAnimation(ACTION.OPEN);\n\n    const autoClose = this.state.config?.autoClose !== undefined ? this.state.config?.autoClose : this.props.config?.autoClose;\n    if (autoClose || autoClose === undefined) {\n      const duration = typeof autoClose === 'number' ? autoClose : ENV.AUTO_CLOSE;\n      this._timeout = setTimeout(() => this._close(), duration);\n    }\n    this.state.config?.onShow?.();\n  };\n\n  /**\n   * @return {Promise<void>}\n   */\n  private _close = async (): Promise<void> => {\n    await this._startAnimation(ACTION.CLOSE);\n    const onHide = this.state.config?.onShow;\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, visible: false, config: undefined }), resolve));\n    onHide?.();\n  };\n\n  /**\n   * @param {ACTION} action\n   * @return {Promise<void>}\n   */\n  private _startAnimation = (action: ACTION): Promise<void> => {\n    return new Promise((resolve) => {\n      Animated.timing(this._positionToast, {\n        toValue: action === ACTION.OPEN ? this.context?.top ?? 0 : -this._cardHeight,\n        duration: 250,\n        useNativeDriver: true,\n      }).start(() => resolve());\n    });\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  private _CardRender = (): JSX.Element => {\n    const { styles } = this.state;\n    if (this.state.config) {\n      const { type, title, textBody, onPress, onLongPress } = this.state.config;\n      return (\n        <Animated.View\n          onLayout={({\n            nativeEvent: {\n              layout: { height },\n            },\n          }) => (this._cardHeight = height)}\n          style={StyleSheet.flatten([styles.cardRow, { transform: [{ translateY: this._positionToast }] }])}\n        >\n          <Pressable style={styles.cardContainer} onPress={onPress} onLongPress={onLongPress}>\n            {type && (\n              <>\n                <View style={styles.backendImage} />\n                <Image source={getImage(type)} resizeMode=\"contain\" style={StyleSheet.flatten([styles.image, styles[`${type}Image`]])} />\n              </>\n            )}\n            {/* eslint-disable-next-line react-native/no-inline-styles */}\n            <View style={{ overflow: 'hidden', flex: 1 }}>\n              {title && <Text style={styles.titleLabel}>{title}</Text>}\n              {textBody && <Text style={styles.descLabel}>{textBody}</Text>}\n            </View>\n          </Pressable>\n        </Animated.View>\n      );\n    }\n    return <></>;\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  public render = (): JSX.Element => {\n    const { visible } = this.state;\n    const { _CardRender } = this;\n    if (!visible) {\n      return <></>;\n    }\n    return <_CardRender />;\n  };\n}\n\nconst __styles = (isDark: boolean) =>\n  StyleSheet.create({\n    backgroundContainer: {\n      ...StyleSheet.absoluteFillObject,\n      backgroundColor: '#00000070',\n    },\n\n    container: {\n      position: 'absolute',\n      backgroundColor: '#00000030',\n      top: 0,\n      left: 0,\n      right: 0,\n    },\n\n    cardRow: {\n      zIndex: 9999,\n      position: 'absolute',\n      left: 0,\n      right: 0,\n    },\n\n    cardContainer: {\n      flexDirection: 'row',\n      borderRadius: 12,\n      paddingHorizontal: 12,\n      paddingTop: 12,\n      paddingBottom: 12,\n      marginHorizontal: 12,\n      marginBottom: 12,\n      backgroundColor: Color.get('card', isDark),\n    },\n\n    titleLabel: {\n      fontWeight: 'bold',\n      fontSize: 18,\n      color: Color.get('label', isDark),\n    },\n    descLabel: {\n      color: Color.get('label', isDark),\n    },\n    backendImage: {\n      position: 'absolute',\n      alignSelf: 'center',\n      height: 12,\n      width: 12,\n      backgroundColor: '#FBFBFB',\n      borderRadius: 100,\n      left: 12 + 7,\n    },\n    image: {\n      alignSelf: 'center',\n      width: 25,\n      aspectRatio: 1,\n      marginRight: 12,\n    },\n\n    [`${ALERT_TYPE.SUCCESS}Image`]: {\n      tintColor: Color.get('success', isDark),\n    },\n    [`${ALERT_TYPE.DANGER}Image`]: {\n      tintColor: Color.get('danger', isDark),\n    },\n    [`${ALERT_TYPE.WARNING}Image`]: {\n      tintColor: Color.get('warning', isDark),\n    },\n  });\n\nexport default Toast;\n"]},"metadata":{},"sourceType":"module"}